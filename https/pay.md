## 第三方支付

## 接入支付宝
### 功能
* 当面付 （条码支付，扫码支付，声波支付）
* app支付
* PC端网站支付
* 手机端网页支付  

### 流程
**app 支付**
1、将支付信息通过RSA私钥签名，这里的私钥是用户自己配置生成的,签名的数据格式key=value&
2、提交的前端，前端调用sdk https://
3、后台回调，通过配置的notifyUrl接收到数据，验证sign,通过sign_type=RSA,调用支付宝的公钥验证，sign_type=md5,就用支付宝配置的md5验证签名
4、前端回调，通过后台提供一个轮询订单查询接口，通过商户订单号

## 接入微信
### 功能
* 扫码支付 `pc端二维码`
* 公众号支付 `在微信内进入商家h5页面的支付`
* h5支付 `在微信以后的h5,不建议使用，改用app支付`
* app支付 ``
* 刷卡支付 `用户展示二维码提供给商户扫描`
* 小程序支付

### 流程
1、统一下单 https://api.mch.weixin.qq.com/pay/unifiedorder，先要后台创建一个接口，这个是跟支付宝有区别的
2、通过下单接口返回一个prepayid，作为支付参数,通过HMAC-SHA256和MD5进行签名,与下单保持一致，签名的数据格式key=value&这个跟支付宝一样
3、后台回调，通过配置的notifyUrl接收到数据，验证sign
4、前端回调，通过后台提供一个轮询订单查询接口,通过商户订单号